!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=e},(n=[{key:"enableValidation",value:function(){var t=this;document.querySelectorAll(this.settings.formSelector).forEach((function(e){var n=Array.from(e.querySelectorAll(t.settings.inputSelector)),r=e.querySelector(t.settings.submitButtonSelector);t.checkImputValiditi(n,r,t.settings),n.forEach((function(o){var i=e.querySelector("#".concat(o.name,"-error")),u=n.some((function(t){return t.value.length>0}));o.classList.remove(t.settings.inputErrorClass),i.textContent=u?o.validationMessage:"",o.checkValidity()?o.classList.remove(t.settings.inputErrorClass):o.classList.add(t.settings.inputErrorClass),o.addEventListener("input",(function(){t.checkImputValiditi(n,r,t.settings),i.textContent=o.validationMessage,o.checkValidity()?o.classList.remove(t.settings.inputErrorClass):o.classList.add(t.settings.inputErrorClass)}))}))}))}},{key:"checkImputValiditi",value:function(t,e,n){t.some((function(t){return!t.checkValidity()}))?(e.disabled=!0,e.classList.add(n.inactiveButtonClass)):(e.disabled=!1,e.classList.remove(n.inactiveButtonClass))}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}document.querySelector(".dialog__content"),document.querySelector("#dialog-img"),document.querySelector("#dialog-text");var c=function(){return t=function t(e,n,r,o,i,u,c,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.link=n,this.id=r,this.handleCardClick=o,this.handleDeleteClick=i,this.handlelick=u,this.handleDisLike=c,this.isLiked=a},(e=[{key:"getTemplate",value:function(){return document.querySelector("#elements_template").content.querySelector(".elements_card").cloneNode(!0)}},{key:"setProperties",value:function(){this.htmlCard=this.getTemplate(),this.cardImage=this.htmlCard.querySelector(".elements_img"),this.cardDescription=this.htmlCard.querySelector(".elements_text"),this.buttonTrash=this.htmlCard.querySelector(".elements__trash-img"),this.buttonLink=this.htmlCard.querySelector(".elements_link-img"),this.cardImage.src=this.link,this.cardDescription.textContent=this.name,this.isLiked&&this.buttonLink.classList.add("elements_link-img-active")}},{key:"createCard",value:function(){return this.setProperties(),this.setEventsListeners(),this.htmlCard}},{key:"toggleLike",value:function(){this.buttonLink.classList.add("elements_link-img-active"),this.handlelick(this.id,this.buttonLink)}},{key:"removeLike",value:function(){this.buttonLink.classList.remove("elements_link-img-active"),this.handleDisLike(this.id,this.buttonLink)}},{key:"removeCard",value:function(){this.htmlCard.remove()}},{key:"setEventsListeners",value:function(){var t=this;this.buttonLink.addEventListener("click",(function(){t.buttonLink.classList.contains("elements_link-img-active")?t.removeLike():t.toggleLike()})),this.buttonTrash.addEventListener("click",(function(){t.handleDeleteClick(t.id)})),this.cardImage.addEventListener("click",(function(){t.handleCardClick(t.name,t.link)}))}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var f=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=r,this.items=e,this.render=n},(e=[{key:"renderer",value:function(){var t=this;this.items.forEach((function(e){t.addItem(e)}))}},{key:"addItem",value:function(t){this.container.append(this.render(t))}},{key:"addNewItem",value:function(t){this.container.prepend(t)}}])&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}var m=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.popup=document.querySelector(e),this._isDialog=!1,this.popup&&"DIALOG"===this.popup.tagName&&(this._isDialog=!0)},e=[{key:"open",value:function(){this.popup&&"DIALOG"===this.popup.tagName?this.popup.showModal():this.popup.classList.add("popup_opened")}},{key:"close",value:function(){this._isDialog?this.popup.close():this.popup.classList.remove("popup_opened")}},{key:"handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;document.addEventListener("keyup",(function(e){t.handleEscClose(e)}));var e=this.popup.querySelectorAll(".popup__close-btn");this.popup&&"DIALOG"===this.popup.tagName&&(e=this.popup.querySelectorAll(".dialog__button")),e.forEach((function(e){e.addEventListener("click",(function(){t.close()}))})),this.popup.addEventListener("click",(function(e){e.target===t.popup&&t.close()}))}}],e&&y(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(g=function(){return!!t})()}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},S.apply(null,arguments)}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}var _=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=k(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,g()?Reflect.construct(e,n||[],k(t).constructor):e.apply(t,n))}(this,e,[t])).name=n.popup.querySelector(".dialog__text"),n.link=n.popup.querySelector(".dialog__img"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(e,t),n=e,r=[{key:"open",value:function(t,n){var r,o,i;(r=e,o=this,"function"==typeof(i=S(k(1&3?r.prototype:r),"open",o))?function(t){return i.apply(o,t)}:i)([]),this.link.src=n,this.name.textContent=t}}],r&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E(r.key),r)}}function E(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function L(t,e,n,r){var o=P(T(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(null,arguments)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}var I=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=T(e),function(t,e){if(e&&("object"==j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}(this,e,[t])).handleForsubmit=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(e,t),n=e,r=[{key:"close",value:function(){L(e,"close",this,3)([]),this.popup.querySelector(".popup__form").reset()}},{key:"getInputValues",value:function(){var t={};return this.popup.querySelector(".popup__form").querySelectorAll("input").forEach((function(e){e.name&&(t[e.name]=e.value)})),t}},{key:"renderLogin",value:function(t,e,n){console.log(n),e.textContent=t?"Cargando...":n,setTimeout((function(){}),3e3)}},{key:"setEventListeners",value:function(){var t=this;L(e,"setEventListeners",this,3)([]);var n=this.popup.querySelector(".popup__form"),r=this.popup.querySelector(".button-loading"),o=r.textContent;n.addEventListener("submit",(function(e){e.preventDefault(),t.renderLogin(!0,r,o);var n=t.getInputValues();t.handleForsubmit(n).then((function(){t.renderLogin(!1,r,o),t.close()}))}))}}],r&&O(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function R(t){var e=function(t){if("object"!=D(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}var A=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=document.querySelector(".profile__name"),this.about=document.querySelector(".profile__hobbie"),this.avatar=document.querySelector(".profile__avatar")},(e=[{key:"getUserInfo",value:function(){return{name:this.name.textContent,about:this.about.textContent,avatar:this.avatar.src}}},{key:"setUserInfo",value:function(t,e,n){this.name.textContent=t,this.about.textContent=e,this.avatar.src=n}}])&&x(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V(r.key),r)}}function V(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}var N="https://around-api.es.tripleten-services.com/v1",G={authorization:"387a3808-ad6d-45cd-b127-9db5833c8e93","Content-Type":"application/json"},J=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"getInitialCards",value:function(){return fetch("".concat(N,"/cards"),{method:"GET",headers:G}).then((function(t){if(t.ok)return t.json()}))}},{key:"getUserInfo",value:function(){return fetch("".concat(N,"/users/me"),{method:"GET",headers:G}).then((function(t){if(t.ok)return t.json()}))}},{key:"editUserInfo",value:function(t){return fetch("".concat(N,"/users/me"),{method:"PATCH",headers:G,body:JSON.stringify(t)}).then((function(t){if(t.ok)return t.json()}))}},{key:"editAvatarUser",value:function(t){return fetch("".concat(N,"/users/me/avatar"),{method:"PATCH",headers:G,body:JSON.stringify({avatar:t})}).then((function(t){if(t.ok)return t.json()}))}},{key:"createCard",value:function(t){return fetch("".concat(N,"/cards/"),{method:"POST",headers:G,body:JSON.stringify(t)}).then((function(t){if(t.ok)return t.json()}))}},{key:"deleteCard",value:function(t){return fetch("".concat(N,"/cards/").concat(t),{method:"DELETE",headers:G}).then((function(t){if(t.ok)return t.json()}))}},{key:"likeCard",value:function(t){return fetch("".concat(N,"/cards/").concat(t,"/likes"),{method:"PUT",headers:G}).then((function(t){if(t.ok)return t.json()}))}},{key:"dislikeCard",value:function(t){return fetch("".concat(N,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:G}).then((function(t){if(t.ok)return t.json()}))}}])&&U(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}());function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H(r.key),r)}}function H(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(z=function(){return!!t})()}function Q(t,e,n,r){var o=K(W(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function K(){return K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=W(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},K.apply(null,arguments)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}var Y,Z=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=W(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,z()?Reflect.construct(e,n||[],W(t).constructor):e.apply(t,n))}(this,e,[t])).handleOnSubmit=n,r._cardId=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(e,t),n=e,(r=[{key:"open",value:function(t,n){Q(e,"open",this,3)([]),this._cardId=t,this.card=n}},{key:"renderLogin",value:function(t,e,n){console.log(n),e.textContent=t?"Cargando...":n,setTimeout((function(){}),3e3)}},{key:"setEventListeners",value:function(){var t=this;Q(e,"setEventListeners",this,3)([]);var n=this.popup.querySelector(".button-loading"),r=n.textContent;this.popup.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),t.renderLogin(!0,n,r),t.handleOnSubmit(t._cardId,t.card).then((function(){t.renderLogin(!1,n,r)}))}))}}])&&F(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m),$=document.querySelector(".profile__edit-button"),tt=document.querySelector("#popup-name"),et=document.querySelector("#popup-about"),nt=document.querySelector(".profile__name"),rt=document.querySelector(".profile__hobbie"),ot=document.querySelector(".profile__add-button"),it=document.querySelector("#popup-card-name"),ut=document.querySelector("#popup-link"),ct=document.querySelector(".profile__avatar-edit"),at=new I("#popup-card",(function(){return J.createCard({name:it.value,link:ut.value}).then((function(t){var e=ht(t);Y.addNewItem(e)}))})),lt=new I("#popup-avatar",(function(t){return J.editAvatarUser(t.avatar).then((function(t){yt.setUserInfo(t.name,t.about,t.avatar)}))})),st=new I("#popup-profile",(function(t){return J.editUserInfo(t).then((function(t){yt.setUserInfo(t.name,t.about,t.avatar)}))})),ft=new m("#dialog"),pt=new _("#dialog"),yt=new A,dt=new Z("#popup-delete",(function(t,e){return J.deleteCard(t).then((function(){dt.close(),e.removeCard()}))}));function mt(t,e){console.log(t,e),J.likeCard(t).then((function(){console.log('¡Tarjeta marcada como "me gusta" exitosamente!')}))}function vt(t){J.dislikeCard(t).then((function(){console.log('¡Quitado el "me gusta" exitosamente!')}))}function bt(){tt.value=nt.textContent,et.value=rt.textContent}function ht(t){var e=new c(t.name,t.link,t._id,St,(function(){dt.open(t._id,e)}),mt,vt,t.isLiked);return e.createCard()}at.setEventListeners(),st.setEventListeners(),ft.setEventListeners(),pt.setEventListeners(),lt.setEventListeners(),dt.setEventListeners(),ot.addEventListener("click",(function(t){t.preventDefault(),at.open()})),$.addEventListener("click",(function(t){t.preventDefault(),st.open(),bt()})),J.getInitialCards().then((function(t){(Y=new f(t,ht,gt)).renderer()})),J.getUserInfo().then((function(t){yt.setUserInfo(t.name,t.about,t.avatar)})),ct.addEventListener("click",(function(t){t.preventDefault(),lt.open()})),bt();var gt=document.querySelector(".elements__container");function St(t,e){pt.open(t,e)}new r({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__Submit-Button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UyxTQUFDd0MsR0FDcENBLEVBQUl1QixpQkFDSnlDLEdBQWdCa0IsTUFDbEIsSUFXQUgsS0FvQkEsSUFBTU8sR0FBVzFKLFNBQVNVLGNBQWMsd0JBRXhDLFNBQVMySSxHQUFnQnJJLEVBQU1nQixHQUM3QjRHLEdBQVdVLEtBQUt0SSxFQUFNZ0IsRUFDeEIsQ0FhbUIsSUFBSXZDLEVBVEksQ0FDekJTLGFBQWMsZUFDZE0sY0FBZSxnQkFDZkcscUJBQXNCLHdCQUN0Qm1CLG9CQUFxQix5QkFDckJQLGdCQUFpQiwwQkFDakJzSSxXQUFZLHlCQUlIQyxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9zZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0cy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncykge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLmZvcm1TZWxlY3Rvcik7XHJcblxyXG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9yRWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICAgIGZvckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLnNldHRpbmdzLmlucHV0U2VsZWN0b3IpXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGZvckVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICB0aGlzLnNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuY2hlY2tJbXB1dFZhbGlkaXRpKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uLCB0aGlzLnNldHRpbmdzKTtcclxuXHJcbiAgICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICBgIyR7aW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3QgaGFuVmFsdWUgPSBpbnB1dExpc3Quc29tZSgoaXRlbSkgPT4gaXRlbS52YWx1ZS5sZW5ndGggPiAwKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaGFuVmFsdWVcclxuICAgICAgICAgID8gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlXHJcbiAgICAgICAgICA6IFwiXCI7XHJcblxyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2hlY2tJbXB1dFZhbGlkaXRpKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uLCB0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuXHJcbiAgICAgICAgICBpZiAoIWlucHV0RWxlbWVudC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tJbXB1dFZhbGlkaXRpKGlucHV0TGlzdCwgc3VibWl0QnV0dG9uLCBzZXR0aW5ncykge1xyXG4gICAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC5jaGVja1ZhbGlkaXR5KCk7XHJcbiAgICB9KTtcclxuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQpIHtcclxuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGRpYWxvZ0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlhbG9nX19jb250ZW50XCIpO1xyXG5jb25zdCBpbWdEaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RpYWxvZy1pbWdcIik7XHJcbmNvbnN0IHRleHREaWFsb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RpYWxvZy10ZXh0XCIpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBuYW1lLFxyXG4gICAgbGluayxcclxuICAgIGlkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVsaWNrLFxyXG4gICAgaGFuZGxlRGlzTGlrZSxcclxuICAgIGlzTGlrZWRcclxuICApIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLmhhbmRsZWxpY2sgPSBoYW5kbGVsaWNrO1xyXG4gICAgdGhpcy5oYW5kbGVEaXNMaWtlID0gaGFuZGxlRGlzTGlrZTtcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBnZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlbGVtZW50c190ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX2NhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuICBzZXRQcm9wZXJ0aWVzKCkge1xyXG4gICAgdGhpcy5odG1sQ2FyZCA9IHRoaXMuZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuY2FyZEltYWdlID0gdGhpcy5odG1sQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX2ltZ1wiKTtcclxuICAgIHRoaXMuY2FyZERlc2NyaXB0aW9uID0gdGhpcy5odG1sQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX3RleHRcIik7XHJcbiAgICB0aGlzLmJ1dHRvblRyYXNoID0gdGhpcy5odG1sQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190cmFzaC1pbWdcIik7XHJcbiAgICB0aGlzLmJ1dHRvbkxpbmsgPSB0aGlzLmh0bWxDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfbGluay1pbWdcIik7XHJcblxyXG4gICAgdGhpcy5jYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xyXG4gICAgdGhpcy5jYXJkRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uTGluay5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfbGluay1pbWctYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuICBjcmVhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICB0aGlzLnNldEV2ZW50c0xpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuaHRtbENhcmQ7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5idXR0b25MaW5rLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19saW5rLWltZy1hY3RpdmVcIik7XHJcbiAgICB0aGlzLmhhbmRsZWxpY2sodGhpcy5pZCwgdGhpcy5idXR0b25MaW5rKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoKSB7XHJcbiAgICB0aGlzLmJ1dHRvbkxpbmsuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRzX2xpbmstaW1nLWFjdGl2ZVwiKTtcclxuICAgIHRoaXMuaGFuZGxlRGlzTGlrZSh0aGlzLmlkLCB0aGlzLmJ1dHRvbkxpbmspO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuaHRtbENhcmQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudHNMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLmJ1dHRvbkxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuYnV0dG9uTGluay5jbGFzc0xpc3QuY29udGFpbnMoXCJlbGVtZW50c19saW5rLWltZy1hY3RpdmVcIikpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUxpa2UoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnRvZ2dsZUxpa2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5idXR0b25UcmFzaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrKHRoaXMuaWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVDYXJkQ2xpY2sodGhpcy5uYW1lLCB0aGlzLmxpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGl0ZW1zLCByZW5kZXIsIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IHNlbGVjdG9yO1xyXG4gICAgdGhpcy5pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5yZW5kZXIgPSByZW5kZXI7XHJcbiAgfVxyXG4gIC8vIG1ldG9kbyBxdWUgc2UgZW5jYXJnYSBkZSBtYXBlYXJcclxuICByZW5kZXJlcigpIHtcclxuICAgIHRoaXMuaXRlbXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIGFncmVnYXIgZWxlbWVudG8gYWwgRG9tXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5yZW5kZXIoaXRlbSkpO1xyXG4gIH1cclxuICBhZGROZXdJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXApO1xyXG4gICAgdGhpcy5faXNEaWFsb2cgPSBmYWxzZTtcclxuXHJcbiAgICAvLyB1c28gZGUgdGhpcy5wb3B1cCBlbiBsdWdhciBkZSB0aGlzLl9wb3B1cFNlbGVjdG9yXHJcbiAgICBpZiAodGhpcy5wb3B1cCAmJiB0aGlzLnBvcHVwLnRhZ05hbWUgPT09IFwiRElBTE9HXCIpIHtcclxuICAgICAgdGhpcy5faXNEaWFsb2cgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIGlmICh0aGlzLnBvcHVwICYmIHRoaXMucG9wdXAudGFnTmFtZSA9PT0gXCJESUFMT0dcIikge1xyXG4gICAgICB0aGlzLnBvcHVwLnNob3dNb2RhbCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvLyBjaWVycmUgZGVsIHBvcHVwIGRlcGVuZGllbmRvIGRlIHNpIGVzIHVuIERJQUxPRyBvIHVuIGRpdlxyXG4gICAgaWYgKHRoaXMuX2lzRGlhbG9nKSB7XHJcbiAgICAgIHRoaXMucG9wdXAuY2xvc2UoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgLy8gQ2llcnJhIGVsIHBvcHVwIHNpIHNlIHByZXNpb25hIGxhIHRlY2xhIEVzY2FwZVxyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBFc2N1Y2hhIGVsIGV2ZW50byBkZSBFc2NhcGUgcGFyYSBjZXJyYXIgZWwgcG9wdXBcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZUVzY0Nsb3NlKGUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2VsZWNjaW9uYSB0b2RvcyBsb3MgYm90b25lcyBkZSBjaWVycmVcclxuICAgIGxldCBjbG9zZUJ1dHRvbnMgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKTtcclxuICAgIGlmICh0aGlzLnBvcHVwICYmIHRoaXMucG9wdXAudGFnTmFtZSA9PT0gXCJESUFMT0dcIikge1xyXG4gICAgICBjbG9zZUJ1dHRvbnMgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGlhbG9nX19idXR0b25cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXNlZ3VyYSBxdWUgY2FkYSBib3TDs24gZGUgY2llcnJlIGNpZXJyZSBlbCBwb3B1cFxyXG4gICAgY2xvc2VCdXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xyXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2llcnJhIGVsIHBvcHVwIHNpIHNlIGhhY2UgY2xpYyBlbiBlbCBmb25kbyAob3ZlcmxheSlcclxuICAgIHRoaXMucG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgLy8gU2kgZWwgb2JqZXRpdm8gZGVsIGNsaWMgZXMgZWwgZm9uZG8sIGNpZXJyYSBlbCBwb3B1cFxyXG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5wb3B1cCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9wb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMubmFtZSA9IHRoaXMucG9wdXAucXVlcnlTZWxlY3RvcihcIi5kaWFsb2dfX3RleHRcIik7XHJcbiAgICB0aGlzLmxpbmsgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZGlhbG9nX19pbWdcIik7XHJcbiAgfVxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5saW5rLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLm5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXAsIGhhbmRsZUZvcnN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5oYW5kbGVGb3JzdWJtaXQgPSBoYW5kbGVGb3JzdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICBjb25zdCBmb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBsZXQgdmFsdWVzID0ge307XHJcbiAgICBjb25zdCBmb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIik7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgocG9wdXApID0+IHtcclxuICAgICAgaWYgKHBvcHVwLm5hbWUpIHtcclxuICAgICAgICB2YWx1ZXNbcG9wdXAubmFtZV0gPSBwb3B1cC52YWx1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9naW4oaXNMb2FkaW5nLCBib3RvbkxvYWRpbmcsIG9yaWdpbmFsVGV4dCkge1xyXG4gICAgY29uc29sZS5sb2cob3JpZ2luYWxUZXh0KTtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgYm90b25Mb2FkaW5nLnRleHRDb250ZW50ID0gXCJDYXJnYW5kby4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm90b25Mb2FkaW5nLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7fSwgMzAwMCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBjb25zdCBmb3JtID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgY29uc3QgYm90b25Mb2FkaW5nID0gdGhpcy5wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbi1sb2FkaW5nXCIpO1xyXG4gICAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gYm90b25Mb2FkaW5nLnRleHRDb250ZW50O1xyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMucmVuZGVyTG9naW4odHJ1ZSwgYm90b25Mb2FkaW5nLCBvcmlnaW5hbFRleHQpO1xyXG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLmhhbmRsZUZvcnN1Ym1pdChkYXRhKS50aGVuKCgpID0+IHtcclxuICAgICAgICB0aGlzLnJlbmRlckxvZ2luKGZhbHNlLCBib3RvbkxvYWRpbmcsIG9yaWdpbmFsVGV4dCk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbiAgICB0aGlzLmFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19ob2JiaWVcIik7XHJcbiAgICB0aGlzLmF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5hdmF0YXIuc3JjLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0LCBhdmF0YXIpIHtcclxuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLmFib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB0aGlzLmF2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGJhc2VVUkwgPSBcImh0dHBzOi8vYXJvdW5kLWFwaS5lcy50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCI7XHJcbmNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgYXV0aG9yaXphdGlvbjogXCIzODdhMzgwOC1hZDZkLTQ1Y2QtYjEyNy05ZGI1ODMzYzhlOTNcIixcclxuICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxufTtcclxuY2xhc3MgQXBpIHtcclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7YmFzZVVSTH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7YmFzZVVSTH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJJbmZvKGJvZHkpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHtiYXNlVVJMfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlZGl0QXZhdGFyVXNlcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHtiYXNlVVJMfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDYXJkKGJvZHkpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHtiYXNlVVJMfS9jYXJkcy9gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHtiYXNlVVJMfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGxpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7YmFzZVVSTH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICBkaXNsaWtlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke2Jhc2VVUkx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFwaTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlT25TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5oYW5kbGVPblN1Ym1pdCA9IGhhbmRsZU9uU3VibWl0O1xyXG4gICAgdGhpcy5fY2FyZElkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIG9wZW4oY2FyZElkLCBjYXJkKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XHJcbiAgICB0aGlzLmNhcmQgPSBjYXJkO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9naW4oaXNMb2FkaW5nLCBib3RvbkxvYWRpbmcsIG9yaWdpbmFsVGV4dCkge1xyXG4gICAgY29uc29sZS5sb2cob3JpZ2luYWxUZXh0KTtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgYm90b25Mb2FkaW5nLnRleHRDb250ZW50ID0gXCJDYXJnYW5kby4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYm90b25Mb2FkaW5nLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7fSwgMzAwMCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBjb25zdCBib3RvbkxvYWRpbmcgPSB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uLWxvYWRpbmdcIik7XHJcbiAgICBjb25zdCBvcmlnaW5hbFRleHQgPSBib3RvbkxvYWRpbmcudGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLnBvcHVwXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckxvZ2luKHRydWUsIGJvdG9uTG9hZGluZywgb3JpZ2luYWxUZXh0KTtcclxuICAgICAgICB0aGlzLmhhbmRsZU9uU3VibWl0KHRoaXMuX2NhcmRJZCwgdGhpcy5jYXJkKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMucmVuZGVyTG9naW4oZmFsc2UsIGJvdG9uTG9hZGluZywgb3JpZ2luYWxUZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xyXG4vKmltcG9ydCB7IGluaXRpYWxDYXJkcyB9IGZyb20gXCIuL3V0aWxzLmpzXCI7Ki9cclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4uL2NvbXBvbmVudHMvcG9wdXAuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBhcGkgZnJvbSBcIi4vQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgYnV0dG9uRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtbmFtZVwiKTtcclxuY29uc3QgaW5wdXRBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXAtYWJvdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlSG9iYmllID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19ob2JiaWVcIik7XHJcbmNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWNhcmQtbmFtZVwiKTtcclxuY29uc3QgY2FyZExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwLWxpbmtcIik7XHJcbmNvbnN0IGltYWdBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0XCIpO1xyXG5cclxuLy8gY2xhc2UgcG9wdXBcclxuY29uc3QgcG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1jYXJkXCIsIGNyZWF0Q2FyZCk7XHJcblxyXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cC1hdmF0YXJcIiwgZWRpdEF2YXRhcik7XHJcbmZ1bmN0aW9uIGVkaXRBdmF0YXIoZGF0YSkge1xyXG4gIHJldHVybiBhcGkuZWRpdEF2YXRhclVzZXIoZGF0YS5hdmF0YXIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXNwb25zZS5uYW1lLCByZXNwb25zZS5hYm91dCwgcmVzcG9uc2UuYXZhdGFyKTtcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgcG9wdXBwcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcG9wdXAtcHJvZmlsZVwiLCBwcm9maWxlRm9ybSk7XHJcbmNvbnN0IHBvcHVwRGlhbG9nID0gbmV3IFBvcHVwKFwiI2RpYWxvZ1wiKTtcclxuY29uc3QgaW1hZ2Vwb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNkaWFsb2dcIik7XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gIFwiI3BvcHVwLWRlbGV0ZVwiLFxyXG4gIChjYXJkSWQsIGNhcmQpID0+IHtcclxuICAgIHJldHVybiBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uY2xvc2UoKTtcclxuICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWNrKGlkLCBidXR0b25MaW5rKSB7XHJcbiAgY29uc29sZS5sb2coaWQsIGJ1dHRvbkxpbmspO1xyXG5cclxuICBhcGkubGlrZUNhcmQoaWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ8KhVGFyamV0YSBtYXJjYWRhIGNvbW8gXCJtZSBndXN0YVwiIGV4aXRvc2FtZW50ZSEnKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGlzTGlrZShpZCkge1xyXG4gIGFwaS5kaXNsaWtlQ2FyZChpZCkudGhlbigoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnwqFRdWl0YWRvIGVsIFwibWUgZ3VzdGFcIiBleGl0b3NhbWVudGUhJyk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbnBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwcHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cERpYWxvZy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZXBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGNsYXNlIFBvcHVwV2l0aEZvcm1cclxuXHJcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHBvcHVwcHJvZmlsZS5vcGVuKCk7XHJcbiAgY2FtYmlhck5vbWJyZSgpO1xyXG59KTtcclxuXHJcbmxldCBzZWN0aW9uO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRDYXJkKCkge1xyXG4gIHJldHVybiBhcGlcclxuICAgIC5jcmVhdGVDYXJkKHtcclxuICAgICAgbmFtZTogY2FyZE5hbWUudmFsdWUsXHJcbiAgICAgIGxpbms6IGNhcmRMaW5rLnZhbHVlLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChyZXNwb25zZSk7XHJcblxyXG4gICAgICBzZWN0aW9uLmFkZE5ld0l0ZW0obmV3Q2FyZCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKGluaXRpYWxDYXJkcykgPT4ge1xyXG4gIHNlY3Rpb24gPSBuZXcgU2VjdGlvbihpbml0aWFsQ2FyZHMsIGNyZWF0ZUNhcmQsIGVsZW1lbnRzKTtcclxuXHJcbiAgc2VjdGlvbi5yZW5kZXJlcigpO1xyXG59KTtcclxuXHJcbmFwaS5nZXRVc2VySW5mbygpLnRoZW4oKFJlc3BvbnNlKSA9PiB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oUmVzcG9uc2UubmFtZSwgUmVzcG9uc2UuYWJvdXQsIFJlc3BvbnNlLmF2YXRhcik7XHJcbn0pO1xyXG5cclxuaW1hZ0F2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcHJvZmlsZUZvcm0oZGF0YSkge1xyXG4gIHJldHVybiBhcGkuZWRpdFVzZXJJbmZvKGRhdGEpLnRoZW4oKFJlc3BvbnNlKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhSZXNwb25zZS5uYW1lLCBSZXNwb25zZS5hYm91dCwgUmVzcG9uc2UuYXZhdGFyKTtcclxuICB9KTtcclxufVxyXG5mdW5jdGlvbiBjYW1iaWFyTm9tYnJlKCkge1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGlucHV0QWJvdXQudmFsdWUgPSBwcm9maWxlSG9iYmllLnRleHRDb250ZW50O1xyXG59XHJcbmNhbWJpYXJOb21icmUoKTtcclxuXHJcbi8vICBjbGFzZSBzZWN0aW9uXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGl0ZW0ubmFtZSxcclxuICAgIGl0ZW0ubGluayxcclxuICAgIGl0ZW0uX2lkLFxyXG4gICAgaGFuZGxlT3BlbkltYWdlLFxyXG4gICAgKCkgPT4ge1xyXG4gICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24ub3BlbihpdGVtLl9pZCwgY2FyZCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGljayxcclxuICAgIGhhbmRsZURpc0xpa2UsXHJcbiAgICBpdGVtLmlzTGlrZWRcclxuICApO1xyXG5cclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5jb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NvbnRhaW5lclwiKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU9wZW5JbWFnZShuYW1lLCBsaW5rKSB7XHJcbiAgaW1hZ2Vwb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG4vLyBjbGFzZSBmb3JtVmFsaWRhdG9yXHJcblxyXG5jb25zdCBzZXR0aW5nc1ZhbGlkYXRpb24gPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fU3VibWl0LUJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5nc1ZhbGlkYXRpb24pO1xyXG52YWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJrZXkiLCJ2YWx1ZSIsIl90aGlzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9ybVNlbGVjdG9yIiwiZm9yRWFjaCIsImZvckVsZW1lbnQiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uIiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiY2hlY2tJbXB1dFZhbGlkaXRpIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwibmFtZSIsImhhblZhbHVlIiwic29tZSIsIml0ZW0iLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tWYWxpZGl0eSIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNhYmxlZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJDYXJkIiwibGluayIsImlkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVsaWNrIiwiaGFuZGxlRGlzTGlrZSIsImlzTGlrZWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiaHRtbENhcmQiLCJnZXRUZW1wbGF0ZSIsImNhcmRJbWFnZSIsImNhcmREZXNjcmlwdGlvbiIsImJ1dHRvblRyYXNoIiwiYnV0dG9uTGluayIsInNyYyIsInNldFByb3BlcnRpZXMiLCJzZXRFdmVudHNMaXN0ZW5lcnMiLCJjb250YWlucyIsInJlbW92ZUxpa2UiLCJ0b2dnbGVMaWtlIiwiU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyIiwic2VsZWN0b3IiLCJjb250YWluZXIiLCJlbGVtZW50IiwiYWRkSXRlbSIsImFwcGVuZCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwIiwiX2lzRGlhbG9nIiwidGFnTmFtZSIsInNob3dNb2RhbCIsImNsb3NlIiwiZXZ0IiwiZSIsImhhbmRsZUVzY0Nsb3NlIiwiY2xvc2VCdXR0b25zIiwiYnV0dG9uIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfY2FsbFN1cGVyIiwiX2luaGVyaXRzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcnN1Ym1pdCIsIl9zdXBlclByb3BHZXQiLCJyZXNldCIsInZhbHVlcyIsImlzTG9hZGluZyIsImJvdG9uTG9hZGluZyIsIm9yaWdpbmFsVGV4dCIsImNvbnNvbGUiLCJsb2ciLCJzZXRUaW1lb3V0IiwiX3RoaXMyIiwiZm9ybSIsInByZXZlbnREZWZhdWx0IiwicmVuZGVyTG9naW4iLCJkYXRhIiwiZ2V0SW5wdXRWYWx1ZXMiLCJ0aGVuIiwiVXNlckluZm8iLCJhYm91dCIsImF2YXRhciIsImJhc2VVUkwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIkFwaSIsImZldGNoIiwibWV0aG9kIiwicmVzIiwib2siLCJqc29uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZWN0aW9uIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwicG9wdXBTZWxlY3RvciIsImhhbmRsZU9uU3VibWl0IiwiX2NhcmRJZCIsImNhcmRJZCIsImNhcmQiLCJidXR0b25FZGl0IiwiaW5wdXROYW1lIiwiaW5wdXRBYm91dCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUhvYmJpZSIsImJ1dHRvbkFkZCIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJpbWFnQXZhdGFyIiwiYXBpIiwiY3JlYXRlQ2FyZCIsInJlc3BvbnNlIiwibmV3Q2FyZCIsImFkZE5ld0l0ZW0iLCJwb3B1cEVkaXRBdmF0YXIiLCJlZGl0QXZhdGFyVXNlciIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cHByb2ZpbGUiLCJlZGl0VXNlckluZm8iLCJSZXNwb25zZSIsInBvcHVwRGlhbG9nIiwiaW1hZ2Vwb3B1cCIsInBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImRlbGV0ZUNhcmQiLCJyZW1vdmVDYXJkIiwiaGFuZGxlTGljayIsImxpa2VDYXJkIiwiZGlzbGlrZUNhcmQiLCJjYW1iaWFyTm9tYnJlIiwiX2lkIiwiaGFuZGxlT3BlbkltYWdlIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiaW5pdGlhbENhcmRzIiwiZWxlbWVudHMiLCJyZW5kZXJlciIsImdldFVzZXJJbmZvIiwiZXJyb3JDbGFzcyIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9